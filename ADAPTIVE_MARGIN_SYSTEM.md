# ุชุญุณูู ุงูููุงูุด ุงูุชููููุฉ ููุฌุฏุงูู ุงููุตูุฉ
## Adaptive Margin System for Text-based Tables

**ุงูุชุงุฑูุฎ**: 15 ููููุจุฑ 2025
**ุงูุฅุตุฏุงุฑ**: v2.0

---

## ๐ ุงููุดููุฉ ุงูุณุงุจูุฉ
ุงูููุงูุด ูู ุงูุฌุฏุงูู ุงููุตูุฉ ูุงูุช ูุจูุฑุฉ ุฌุฏุงู ูุบูุฑ ูุชูุงุณุจุฉ ูุน ุญุฌู ุงููุตุ ููุง ูุคุฏู ุฅูู:
- ูุฏุฑ ูุณุงุญุฉ ุงููุฑูุฉ
- ุนุฏู ุงุณุชุบูุงู ุงููุณุงุญุฉ ุงููุชุงุญุฉ ุจููุงุกุฉ
- ุนุฏู ุชูุงุฒู ุจูู ุงูููุงูุด ูุญุฌู ุงููุต

---

## โ ุงูุญู ุงููุทุจู

### 1. **ุฅุถุงูุฉ ูุธุงู ุชุชุจุน ุงูุฃุณุทุฑ (Line Tracking System)**
```javascript
constructor() {
    this.maxLineLength = 0;      // ุชุชุจุน ุฃูุตู ุทูู ุณุทุฑ ูุฑุฆู
    this.minCharWidth = 20;      // ุงูุญุฏ ุงูุฃุฏูู ููุนุฑุถ
    this.charWidth = 32;         // ุงูุนุฑุถ ุงูุฃุณุงุณู
}
```

### 2. **ุฏุงูุฉ ุญุณุงุจ ุงูุนุฑุถ ุงูุชูููู**
```javascript
getAdaptiveWidth(text) {
    const textLength = text ? text.length : 0;
    // ุชุญุฏูุซ ุฃูุตู ุทูู ุณุทุฑ ุฅุฐุง ูุฒู ุงูุฃูุฑ
    if (textLength > this.maxLineLength) {
        this.maxLineLength = textLength;
    }
    // ุงุณุชุฎุฏุงู ุฃูุตู ูู: charWidth ุฃู ุทูู ุงููุต ุฃู ุฃูุตู ุทูู ูุฑุฆู
    return Math.max(
        this.charWidth,           // ุงูุญุฏ ุงูุฃุฏูู (32)
        textLength,               // ุงูุทูู ุงููุนูู
        Math.min(this.maxLineLength, 80)  // ุฃูุตู ุทูู ูุฑุฆู (ุญุชู 80)
    );
}
```

### 3. **ุชุญุฏูุซ ุฏูุงู ุงููุญุงุฐุงุฉ**

#### centerText (ุงููุฑูุฒ)
- **ูุจู**: ููุงูุด ุซุงุจุชุฉ = charWidth
- **ุจุนุฏ**: ููุงูุด ุชููููุฉ = getAdaptiveWidth()
- **ุงููุชูุฌุฉ**: ูุญุงุฐุงุฉ ูุฑูุฒ ุฏููุงููููุฉ

#### rightText (ุงููููู)
- **ูุจู**: ููุงูุด ุซุงุจุชุฉ ุนูู ุงููููู
- **ุจุนุฏ**: ููุงูุด ุชููููุฉ ุชุชูุงุณุจ ูุน ุงููุญุชูู
- **ุงููุชูุฌุฉ**: ุชูุงุฒู ุฃูุถู ูููุตูุต

#### truncateText (ุงููุต)
- **ูุจู**: ูุต ุงููุต ุนูุฏ 32 ุญุฑู
- **ุจุนุฏ**: ุงูุณูุงุญ ุจุชูุณูุน ุงููุต ุฏููุงููููุงู
- **ุงููุชูุฌุฉ**: ุนุฏู ูุต ุงููุญุชูู ุงูููู

### 4. **ุฅุนุงุฏุฉ ุชุนููู ุงูุชุชุจุน (Reset)**
```javascript
resetLineTracking() {
    this.maxLineLength = 0;  // ุฅุนุงุฏุฉ ุชุนููู ููู ุฅูุตุงู ุฌุฏูุฏ
}
```
ูุชู ุงุณุชุฏุนุงุคูุง ูู ุจุฏุงูุฉ ูู `generateReceiptHTML()`

### 5. **ุชุญุณููุงุช CSS**

#### ููุดุงุดุฉ (Screen)
```css
@media screen {
    .receipt-form {
        width: auto;                /* ุนุฑุถ ุชููุงุฆู */
        display: inline-block;      /* ุนุฑุถ ูุญุชูู */
        min-width: fit-content;     /* ุงูุญุฏ ุงูุฃุฏูู ูุทุงุจู ุงููุญุชูู */
        max-width: 100%;            /* ุงูุญุฏ ุงูุฃูุตู = ุนุฑุถ ุงูุดุงุดุฉ */
        overflow-x: auto;           /* ุดุฑูุท ุชูุฑูุฑ ุฃููู ุฅุฐุง ูุฒู */
        white-space: pre;           /* ุงูุญูุงุธ ุนูู ุงููุณุงูุงุช */
        word-wrap: normal;          /* ุจุฏูู ููุงุตู ูููุงุช */
        font-size: 12px;            /* ุญุฌู ุฎุท ูุฑุฆู ุฃูุจุฑ */
    }
}
```

#### ููุทุจุงุนุฉ (Print)
```css
@media print {
    .receipt-form {
        width: 80mm;                /* ุนุฑุถ ุงููุฑูุฉ */
        padding: 1mm 2mm;           /* ููุงูุด ูุญุณูุจุฉ */
        font-size: 8pt;             /* ุญุฌู ุฎุท ูุญุณูุจ */
        overflow: hidden;           /* ุฅุฎูุงุก ุฃู ุชุฌุงูุฒ */
        white-space: pre;           /* ุงูุญูุงุธ ุนูู ุงููุณุงูุงุช */
        word-wrap: normal;          /* ุจุฏูู ููุงุตู */
        line-height: 1;             /* ูุง ูุณุงูุฉ ุฅุถุงููุฉ */
        letter-spacing: -0.5px;     /* ุชูุฑูุจ ุงูุฃุญุฑู */
    }
}
```

---

## ๐ ูุซุงู ุนููู

### ุงููุต ุงููุฏูู (ุจููุงูุด ูุจูุฑุฉ):
```
        ุชุตููุฉ ุจุฑู
        Tasfiya Pro
================================
ุฑูู: #123
ุงูุชุงุฑูุฎ: 15/11/2025
```

### ุงููุต ุงูุฌุฏูุฏ (ุจููุงูุด ุชููููุฉ):
```
    ุชุตููุฉ ุจุฑู
    Tasfiya Pro
==========
ุฑูู: #123
ุงูุชุงุฑูุฎ: 15/11/2025
```

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### `src/thermal-printer-80mm.js`

#### ุงูุชุญุณููุงุช:
1. โ ุฅุถุงูุฉ `maxLineLength` ู `minCharWidth`
2. โ ุฏุงูุฉ `getAdaptiveWidth()` ุงูุฌุฏูุฏุฉ
3. โ ุฏุงูุฉ `resetLineTracking()` ุงูุฌุฏูุฏุฉ
4. โ ุชุญุฏูุซ `centerText()` ููุงุณุชุฎุฏุงู ุงูุชูููู
5. โ ุชุญุฏูุซ `rightText()` ููุงุณุชุฎุฏุงู ุงูุชูููู
6. โ ุชุญุฏูุซ `truncateText()` ุจุฏูู ูุต
7. โ ุชุญุฏูุซ `getSeparatorLine()` ุจุดูู ุชูููู
8. โ ุฅุถุงูุฉ ุงุณุชุฏุนุงุก `resetLineTracking()` ูู ุงูุจุฏุงูุฉ
9. โ ุชุญุณูู CSS ูู `.receipt-form` ุนูู ุงูุดุงุดุฉ
10. โ ุชุญุณูู CSS ูู `.receipt-form` ูู ุงูุทุจุงุนุฉ

---

## โจ ุงูููุงุฆุฏ

| ุงููุงุฆุฏุฉ | ุงููุตู |
|--------|--------|
| **ุงุณุชุบูุงู ุฃูุถู ูููุณุงุญุฉ** | ุงูููุงูุด ุชุชููู ูุน ุญุฌู ุงููุญุชูู |
| **ุชูุงุฒู ูุญุณูู** | ุชูุงุณุจ ุฃูุถู ุจูู ุงููุตูุต ูุงูููุงูุด |
| **ุนุฏู ุงููุต** | ูุญุชูู ุฃุทูู ูุง ูุชู ูุตู ุชููุงุฆูุงู |
| **ูุงุจููุฉ ูุฑุงุกุฉ** | ุฃุณูู ูุฑุงุกุฉ ูุน ุชุฎุทูุท ููุธู |
| **ูุฑููุฉ** | ูุนูู ูุน ูุญุชูู ุจุฃุญุฌุงู ูุฎุชููุฉ |
| **ุชูุงูููุฉ** | ูุนูู ุนูู ุงูุดุงุดุฉ ูุงูุทุงุจุนุฉ |

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

1. ุงูุชุญ ุชุทุจูู Tasfiya Pro
2. ูู ุจุฅูุดุงุก ุชุตููุฉ
3. ุฃุถู ุนูุงุตุฑ ุจุฃุทูุงู ูุตูุต ูุฎุชููุฉ
4. ุงุถุบุท ุนูู "ูุนุงููุฉ" ููุชุญูู ุนูู ุงูุดุงุดุฉ
5. ุงุถุบุท ุนูู "ุทุจุงุนุฉ" ููุชุญูู ุนูู ุงููุฑูุฉ
6. ุชุฃูุฏ ูู ุฃู ุงูููุงูุด ูุชูุงุณุจุฉ ูุน ูุญุชูู ุงููุต

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:
โ ุงููุตูุต ุงููุตูุฑุฉ ููุง ููุงูุด ุตุบูุฑุฉ  
โ ุงููุตูุต ุงูุทูููุฉ ููุง ููุงูุด ูุชูุงุณุจุฉ  
โ ูุง ููุฌุฏ ูุต ุบูุฑ ูุชููุน  
โ ุชูุงุฒู ุจุตุฑู ุฃูุถู

---

## ๐ ุงูููุทู ุงูุชููู

### ููู ุชุนูู ุงูุฎูุงุฑุฒููุฉ:

```
1. ุนูุฏ ุจุฏุก receipt ุฌุฏูุฏ:
   โ ุงุณุชุฏุนุงุก resetLineTracking()
   โ maxLineLength = 0

2. ุนูุฏ ูู ุณุทุฑ ูุต:
   โ ุงุณุชุฏุนุงุก centerText() ุฃู rightText()
   โ ุญุณุงุจ adaptiveWidth = max(charWidth, textLength, maxLineLength)
   โ ุชุญุฏูุซ maxLineLength ุฅุฐุง ูุงู ุงููุต ุฃุทูู
   โ ุญุณุงุจ ุงูููุงูุด ุนูู ุฃุณุงุณ adaptiveWidth

3. ุงููุชูุฌุฉ:
   โ ูู ุงูุฃุณุทุฑ ููุง ููุณ ุงูุนุฑุถ ุงูุฃุณุงุณู
   โ ุงูููุงูุด ุชุชููู ูุน ุฃุทูู ูุต
   โ ุชูุงุฒู ูุชุฌุงูุณ ูู ุงูุฅูุตุงู ููู
```

---

## ๐ ุงููุชุทูุจุงุช ุงููุณุชูุจููุฉ

- ุฅููุงููุฉ ุชุฎุตูุต ุงูุญุฏ ุงูุฃูุตู ููุนุฑุถ ูู ุงูุฅุนุฏุงุฏุงุช
- ุฅุถุงูุฉ ุฎูุงุฑ ูุชูููู ุญุฌู ุงูุฎุท ุชููุงุฆูุงู ุฅุฐุง ูุงู ุงููุต ุทูููุงู ุฌุฏุงู
- ุฏุนู ุฃููุงู ูุฎุชููุฉ ูููุตูุต ุจูุงุกู ุนูู ุงูุฃูููุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

- ุงูููุงูุด ุงูุชููููุฉ ุชูุญุณุจ **ููู ุฅูุตุงู ูููุตู**
- ูุง ุชุคุซุฑ ุนูู ูุธููุฉ ุงูุฌุฏุงูู HTML (ุงูุฌุฏุงูู ููุง ูุธุงู ุฎุงุต ุจูุง)
- ุชุทุจู ููุท ุนูู ุงููุตูุต ุงููุณุจููุฉ (pre-formatted text)
- ุชูุงููุฉ ูุน ุฌููุน ุฃููุงุน ูุญุชูู ุงูุฅูุตุงูุงุช

---

**ุงููุทูุฑ**: ูุญูุฏ ุฃููู ุงููุงูู  
**ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ Tasfiya Pro 2025**
